function Main(name)
    
    [calbody, readings, empivot, optpivot] = Parse(name);
    dCloud = calbody{1};
    aCloud = calbody{2};
    cCloud = calbody{3};
    
    frames = size(readings, 1);
    
    Cest = cell(1, frames);
    for n = 1:frames
        Cest{n} = zeros(size(readings{n,3}));
        [RD, pD] = CloudToCloud(dCloud, readings{n,1});
        [RA, pA] = CloudToCloud(aCloud, readings{n,2});
        for i = 1:size(cCloud)
            Cest{n}(i,:) = RD\(RA*cCloud(i, :).' + pA) - RD\pD;
        end
    end
    
    optframes = size(optpivot, 1);
    disp(optpiv
    disp(size(optpivot, 1));
    transpivot = cell(1, optframes);
    for n = 1:optframes
        transpivot{n} = zeros(size(optpivot{n,2}));
        [RD, pD] = CloudToCloud(dCloud, optpivot{n,1});
            for i = 1:size(cCloud)
                disp(optpivot{n,2});
                transpivot{n}(i,:) = RD*optpivot{n,2}(i, :).' + pD;
            end
    end
    
    empPosition = PostPosition(empivot);
    optPosition = PostPosition(transpivot);
    
    fopen(strcat(name, '-output-1.txt'), 'w');
    fileID = strcat(name, '-output-1.txt');
    dlmwrite(fileID, empPosition.', ' ');
    dlmwrite(fileID, optPosition.', ' ');
    
end